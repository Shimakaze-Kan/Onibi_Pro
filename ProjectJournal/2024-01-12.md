# Project Journal - 2024-01-12

Today, I was writing a query to retrieve regional managers from the database, and suddenly it turned out that my request was passing to the handler, even though I provided an incorrect value in the query. It surprised me a bit why the validator wasn't catching this. My first thought was that something changed with the package updates, but that wasn't the case. Validation is done using a pipeline behavior with MediatR and looks like this:

```csharp
internal sealed class ValidationBehaviour<TRequest, TResponse>
    : IPipelineBehavior<TRequest, TResponse>
    where TRequest : IRequest<TResponse>
    where TResponse : IErrorOr
{
// rest of the class
```

The problem was that `TResponse` had to be `IErrorOr`. So, I had to add ErrorOr to all queries and commands to maintain consistency. This library was created in such a way that everything will work. It was a monotonous task, but I got it done.

![moko](./imgs/Moko.webp)

I would add the execution plan for the old and new query for retrieving regional managers at this point, but SQL Server Management Studio doesn't have an option to export the execution plan as an image.
